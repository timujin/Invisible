[gd_scene load_steps=4 format=2]

[ext_resource path="res://Assets/Player.png" type="Texture" id=1]

[sub_resource type="GDScript" id=1]
script/source = "extends KinematicBody2D

var path = null
var speed = 100 setget set_path

# Called when the node enters the scene tree for the first time.
func _ready():
	var nav  = get_tree().get_root().get_node(\"Base/Navigation2D\")
	var goal = get_tree().get_root().get_node(\"Base/Goal\")
	path = nav.get_simple_path(global_position, goal.global_position)
	
func _process(delta):
	if path == null:
		return
	move_along_path(delta * speed)
		
func set_path(value):
	path = value
	if path.size() == 0:
		path = null
		
func move_along_path(distance):
	var start_position := position
	for i in range(path.size()):
		var distance_to_next = start_position.distance_to(path[0])
		if distance <= distance_to_next and distance >= 0.0:
			position = start_position.linear_interpolate(path[0], distance/ distance_to_next)
			break
		elif distance <= 0:
			position = path[0]
			path = null
			return
		distance -= distance_to_next
		start_position = path[0]
		path.remove(0)
		"

[sub_resource type="CircleShape2D" id=2]
radius = 16.5683

[node name="Enemy" type="KinematicBody2D"]
script = SubResource( 1 )

[node name="Sprite" type="Sprite" parent="."]
modulate = Color( 1, 0, 0, 1 )
rotation = 1.5708
scale = Vector2( 0.18, 0.18 )
texture = ExtResource( 1 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2( -5.19653, 0.225941 )
rotation = 0.804494
shape = SubResource( 2 )
